<?xml version="1.0" encoding="utf-8" ?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CatalogoApp.UI.Resources.Styles.Templates"
            >

    <ControlTemplate x:Key="MainLayoutTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <VerticalStackLayout Grid.Column="0" BackgroundColor="{StaticResource PageBackgroundColor}" Spacing="15" Padding="10">

        <!--RelativeSource: El origen del dato es relativo a mi posición actual.
        AncestorType={x:Type ContentPage}: Busca "hacia arriba" hasta que encuentres 
        un control que sea una ContentPage (en nuestro caso, será MarcaPage, ArticuloPage, etc.).
        BindingContext.NavegarAMarcasCommand: Una vez que encuentres esa ContentPage, busca su 
        BindingContext (que es nuestro ViewModel) y, dentro de él, ahora sí, busca la propiedad NavegarA{ENTIDAD}Command.-->
                <Button Text="Artículos" 
                    Style="{StaticResource MenuButtonStyle}" 
                    Command="{Binding BindingContext.NavegarAArticulosCommand, 
                    Source={RelativeSource AncestorType={x:Type ContentPage}}}" />

                <Button Text="Marcas" Style="{StaticResource MenuButtonStyle}" 
                        Command="{Binding BindingContext.NavegarAMarcasCommand, 
                    Source={RelativeSource AncestorType={x:Type ContentPage}}}" />
                <Button Text="Categorías" Style="{StaticResource MenuButtonStyle}" 
                        Command="{Binding BindingContext.NavegarACategoriasCommand, 
                    Source={RelativeSource AncestorType={x:Type ContentPage}}}" />

            </VerticalStackLayout>

            <ContentPresenter Grid.Column="1" />

        </Grid>
    </ControlTemplate>
</ResourceDictionary>